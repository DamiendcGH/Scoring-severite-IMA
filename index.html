<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>√âvaluation de l'impact d'un incident majeur</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            line-height: 1.6;
            color: #333;
        }
        
        h1 {
            color: #2c3e50;
            margin-bottom: 30px;
        }
        
        /* Styles des cat√©gories */
        .category {
            margin-bottom: 30px;
            padding: 15px;
            border-radius: 5px;
            border: 2px solid;
        }
        
        .business {
            border-color: #e74c3c;
            background-color: #fdecea;
        }
        
        .client {
            border-color: #f39c12;
            background-color: #fef5e6;
        }
        
        .operationnel {
            border-color: #3498db;
            background-color: #ebf5fb;
        }
        
        .reputationnel {
            border-color: #2ecc71;
            background-color: #e8f8f0;
        }
        
        .financier {
            border-color: #3498db;
            background-color: #ebf5fb;
        }
        
        .category h2 {
            margin-top: 0;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(0,0,0,0.1);
        }
        
        /* Styles des questions */
        .question {
            margin-bottom: 20px;
        }
        
        .question label {
            display: block;
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        select {
            padding: 8px;
            width: 100%;
            max-width: 500px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background-color: white;
        }
        
        .note {
            font-size: 0.85em;
            color: #666;
            margin-top: 5px;
        }
        
        /* Bouton */
        button {
            padding: 12px 20px;
            background: #2c3e50;
            color: white;
            border: none;
            cursor: pointer;
            font-size: 16px;
            border-radius: 4px;
            margin-top: 20px;
            transition: background 0.3s;
        }
        
        button:hover {
            background: #1a252f;
        }
        
        /* R√©sultats */
        #results {
            margin-top: 40px;
            padding: 20px;
            border-radius: 5px;
            background: #f5f5f5;
            border: 1px solid #ddd;
        }
        
        .severity {
            font-weight: bold;
            margin-right: 10px;
            padding: 3px 8px;
            border-radius: 3px;
            display: inline-block;
            min-width: 50px;
            text-align: center;
        }
        
        .SEV1 {
            color: #c0392b;
            background: #f9d6d2;
        }
        
        .SEV2 {
            color: #d35400;
            background: #fae5d3;
        }
        
        .SEV3 {
            color: #f1c40f;
            background: #fff9c4;
        }
        
        .no-impact {
            color: #666;
        }
        
        .results-list {
            list-style-type: none;
            padding: 0;
        }
        
        .results-list li {
            margin-bottom: 10px;
            padding: 15px;
            background: white;
            border-radius: 4px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .global-severity {
            font-size: 1.2em;
            margin-bottom: 20px;
            padding: 15px;
            background: white;
            border-radius: 4px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .category-results {
            margin-top: 20px;
        }
        
        .question-result {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        
        .question-result:last-child {
            border-bottom: none;
        }
        
        .question-label {
            font-weight: normal;
        }
        
        .severity-badge {
            font-weight: bold;
        }
        
        /* Score */
        .impact-score {
            font-size: 1.5em;
            font-weight: bold;
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            background: #2c3e50;
            color: white;
            border-radius: 4px;
        }
        
        .score-value {
            font-size: 2em;
        }
        
        .category-score {
            display: flex;
            justify-content: space-between;
            margin-top: 5px;
            font-size: 0.9em;
        }
        
        .score-bar-container {
            width: 100%;
            height: 10px;
            background: #eee;
            border-radius: 5px;
            margin-top: 5px;
        }
        
        .score-bar {
            height: 100%;
            border-radius: 5px;
            background: #2c3e50;
        }
        
        .question-points {
            font-size: 0.8em;
            color: #666;
            margin-left: 10px;
        }
    </style>
</head>
<body>
    <h1>√âvaluation de l'impact d'un incident majeur</h1>
    <form id="impactForm">
        <!-- Cat√©gorie 1 : Impact Business (üü•) -->
        <div class="category business">
            <h2>1. Impact Business (üü•)</h2>
            <div class="question">
                <label for="q1_1">Q1.1 Estimation des pertes de r√©servations :</label>
                <select id="q1_1">
                    <option value="none">Aucune perte</option>
                    <option value="SEV1">>200k ‚Ç¨</option>
                    <option value="SEV2">50 - 200k ‚Ç¨</option>
                    <option value="SEV3"><50k ‚Ç¨</option>
                </select>
                <div class="note">Note : Se base sur le montant brut des r√©servations perdues.</div>
            </div>
            <div class="question">
                <label for="q1_2">Q1.2 H√¥tels impact√©s :</label>
                <select id="q1_2">
                    <option value="none">Aucun h√¥tel impact√©</option>
                    <option value="SEV1">>200 h√¥tels</option>
                    <option value="SEV2">50-200 h√¥tels</option>
                    <option value="SEV3"><50 h√¥tels</option>
                </select>
                <div class="note">Note : Nombre d‚Äôh√¥tels affect√©s par des erreurs de donn√©es, des blocages de r√©servation, des mises √† jour incorrectes, etc.</div>
            </div>
            <div class="question">
                <label for="q1_3">Q1.3 Risque l√©gal//overbooking :</label>
                <select id="q1_3">
                    <option value="none">Aucun risque</option>
                    <option value="SEV1">RGPD/PCI/overbooking</option>
                    <option value="SEV2">SLA partenaire compromis</option>
                    <option value="SEV3">Risque mineur</option>
                </select>
                <div class="note">Note : Cochez "Aucun risque" si l‚Äôincident est uniquement technique, sans impact l√©gal.</div>
            </div>
        </div>

        <!-- Cat√©gorie 2 : Impact Client (üü°) -->
        <div class="category client">
            <h2>2. Impact Client (üü°)</h2>
            <div class="question">
                <label for="q2_1">Q2.1 Clients affect√©s :</label>
                <select id="q2_1">
                    <option value="none">Aucun client touch√©</option>
                    <option value="SEV1">>10% ou r√©gion cl√©</option>
                    <option value="SEV2">Segment sp√©cifique</option>
                    <option value="SEV3">Cas isol√©s</option>
                </select>
                <div class="note">Note : Estimez la proportion d'utilisateurs impact√©s par l'incident</div>
            </div>
            <div class="question">
                <label for="q2_2">Q2.2 D√©gradation du service :</label>
                <select id="q2_2">
                    <option value="none">Aucun impact</option>
                    <option value="SEV1">R√©servation impossible</option>
                    <option value="SEV2">Ralentissements/paiements √©chou√©s</option>
                    <option value="SEV3">Bugs mineurs</option>
                </select>
                <div class="note">Note : √âvaluez l'impact sur le parcours client.</div>
            </div>
            <div class="question">
                <label for="q2_3">Q2.3 Satisfaction client :</label>
                <select id="q2_3">
                    <option value="none">Aucun changement</option>
                    <option value="SEV1">Plaintes massives</option>
                    <option value="SEV2">Hausse des tickets</option>
                    <option value="SEV3">Impact mineur</option>
                </select>
                <div class="note">Note : Consultez les √©quipes Support pour les donn√©es quantitatives.</div>
            </div>
        </div>

        <!-- Cat√©gorie 3 : Impact Op√©rationnel (üü¶) -->
        <div class="category operationnel">
            <h2>3. Impact Op√©rationnel (üü¶)</h2>
            <div class="question">
                <label for="q3_1">Q3.1 Outils internes :</label>
                <select id="q3_1">
                    <option value="none">Tout fonctionne</option>
                    <option value="SEV1">CRM/portail down</option>
                    <option value="SEV2">Fonctionnalit√©s r√©duites</option>
                    <option value="SEV3">Probl√®mes cosm√©tiques</option>
                </select>
                <div class="note">Note : Ne concerne que les outils sensibles ou n√©cessitant une haute disponibilit√©.</div>
            </div>
            <div class="question">
                <label for="q3_2">Q3.2 Charge du support :</label>
                <select id="q3_2">
                    <option value="none">Aucune augmentation de charge</option>
                    <option value="SEV1">Pic de tickets + processus manuels</option>
                    <option value="SEV2">Charge accrue</option>
                    <option value="SEV3">Impact mineur</option>
                </select>
                <div class="note">Note : Se base sur le volume de tickets en augmentation lors de l'incident.</div>
            </div>
            <div class="question">
                <label for="q3_3">Q3.3 Outils B2B :</label>
                <select id="q3_3">
                    <option value="none">Rien √† signaler</option>
                    <option value="SEV1">Extranet down</option>
                    <option value="SEV2">Instabilit√©s</option>
                    <option value="SEV3">D√©gradation mineure</option>
                </select>
                <div class="note">Note : V√©rifier aupr√®s des √©quipes Partenaires si n√©cessaire.</div>
            </div>
        </div>

        <!-- Cat√©gorie 4 : Risque R√©putationnel (üü©) -->
        <div class="category reputationnel">
            <h2>4. Risque R√©putationnel (üü©)</h2>
            <div class="question">
                <label for="q4_1">Q4.1 Visibilit√© publique :</label>
                <select id="q4_1">
                    <option value="none">Non visible</option>
                    <option value="SEV1">M√©dias/r√©seaux sociaux</option>
                    <option value="SEV2">Signalements clients directs</option>
                    <option value="SEV3">Discussion interne</option>
                </select>
                <div class="note">Note : Surveiller les canaux publics et internes.</div>
            </div>
            <div class="question">
                <label for="q4_2">Q4.2 Partenaires strat√©giques :</label>
                <select id="q4_2">
                    <option value="none">Aucun impact</option>
                    <option value="SEV1">Grands groupes</option>
                    <option value="SEV2">Partenaires interm√©diaires</option>
                    <option value="SEV3">Petits partenaires</option>
                </select>
                <div class="note">Note : Prioriser les partenaires g√©n√©rant >5% du chiffre d'affaires.</div>
            </div>
            <div class="question">
                <label for="q4_3">Q4.3 Risque cyber :</label>
                <select id="q4_3">
                    <option value="none">Aucune menace</option>
                    <option value="SEV1">DDoS/phishing massif</option>
                    <option value="SEV2">Incident cibl√©</option>
                    <option value="SEV3">Alerte mineure</option>
                </select>
                <div class="note">Note : Voir avec les √©quipes de Cybers√©curit√©.</div>
            </div>
        </div>

        <!-- Cat√©gorie 5 : Impact Financier (üü¶) -->
        <div class="category financier">
            <h2>5. Impact Financier (üü¶)</h2>
            <div class="question">
                <label for="q5_1">Q5.1 Commissions/frais :</label>
                <select id="q5_1">
                    <option value="none">Aucun impact</option>
                    <option value="SEV1">Pertes majeures</option>
                    <option value="SEV2">Pertes mod√©r√©es</option>
                    <option value="SEV3">Impact marginal</option>
                </select>
                <div class="note">Note : Inclut les p√©nalit√©s contractuelles et frais exceptionnels.</div>
            </div>
        </div>

        <button type="button" onclick="calculateImpact()">Calculer l'Impact</button>
    </form>

    <div id="results"></div>

   <script>
    // Configuration des cat√©gories avec leurs coefficients
    const categories = [
        {
            id: "business",
            name: "Impact Business",
            emoji: "üü•",
            weight: 30, // Poids sur 100
            questions: [
                { id: "q1_1", label: "Estimation des pertes de r√©servations" },
                { id: "q1_2", label: "H√¥tels impact√©s" },
                { id: "q1_3", label: "Risque l√©gal/conformit√©/overbooking" }
            ]
        },
        {
            id: "client",
            name: "Impact Client",
            emoji: "üü°",
            weight: 25,
            questions: [
                { id: "q2_1", label: "Clients affect√©s" },
                { id: "q2_2", label: "D√©gradation du service" },
                { id: "q2_3", label: "Satisfaction client" }
            ]
        },
        {
            id: "operationnel",
            name: "Impact Op√©rationnel",
            emoji: "üü¶",
            weight: 15,
            questions: [
                { id: "q3_1", label: "Outils internes" },
                { id: "q3_2", label: "Charge du support" },
                { id: "q3_3", label: "Outils B2B" }
            ]
        },
        {
            id: "reputationnel",
            name: "Risque R√©putationnel",
            emoji: "üü©",
            weight: 20,
            questions: [
                { id: "q4_1", label: "Visibilit√© publique" },
                { id: "q4_2", label: "Partenaires strat√©giques" },
                { id: "q4_3", label: "Risque cyber" }
            ]
        },
        {
            id: "financier",
            name: "Impact Financier",
            emoji: "üü¶",
            weight: 10,
            questions: [
                { id: "q5_1", label: "Commissions/frais" }
            ]
        }
    ];

    // Valeurs des points par niveau de s√©v√©rit√©
    const severityValues = {
        "SEV1": 1.0, // 100% du poids de la cat√©gorie
        "SEV2": 0.6, // 60% du poids
        "SEV3": 0.2, // 20% du poids
        "none": 0
    };

    // √âvalue la s√©v√©rit√© d'une cat√©gorie et calcule son score
    function evaluateCategory(category) {
        let maxSeverity = null;
        let categoryScore = 0;
        
        const questionResults = category.questions.map(q => {
            const value = document.getElementById(q.id).value;
            const points = severityValues[value];
            const questionWeight = category.weight / category.questions.length;
            const weightedPoints = points * questionWeight;
            
            // D√©termine la s√©v√©rit√© max
            if (value !== "none") {
                if (!maxSeverity || 
                    (value === "SEV1") || 
                    (value === "SEV2" && maxSeverity !== "SEV1") ||
                    (value === "SEV3" && maxSeverity !== "SEV1" && maxSeverity !== "SEV2")) {
                    maxSeverity = value;
                }
            }
            
            return {
                id: q.id,
                label: q.label,
                value: value,
                points: points,
                weightedPoints: weightedPoints
            };
        }).filter(q => q.value !== "none");

        if (questionResults.length === 0) return null;

        // Calcule le score de la cat√©gorie (somme des questions pond√©r√©es)
        categoryScore = questionResults.reduce((sum, q) => sum + q.weightedPoints, 0);

        return {
            name: category.name,
            emoji: category.emoji,
            severity: maxSeverity,
            questions: questionResults,
            score: categoryScore,
            maxPossibleScore: category.weight
        };
    }

    // Calcule et affiche les r√©sultats
    function calculateImpact() {
        let results = [];
        let globalSeverity = null;
        let totalScore = 0;
        let maxPossibleTotalScore = categories.reduce((sum, cat) => sum + cat.weight, 0);

        // √âvalue chaque cat√©gorie
        categories.forEach(category => {
            const evaluation = evaluateCategory(category);
            if (evaluation) {
                results.push(evaluation);
                totalScore += evaluation.score;
                
                // D√©termine la s√©v√©rit√© globale
                if (!globalSeverity || 
                    (evaluation.severity === "SEV1") || 
                    (evaluation.severity === "SEV2" && globalSeverity !== "SEV1") ||
                    (evaluation.severity === "SEV3" && globalSeverity !== "SEV1" && globalSeverity !== "SEV2")) {
                    globalSeverity = evaluation.severity;
                }
            }
        });

        const resultsDiv = document.getElementById("results");
        
        if (results.length === 0) {
            resultsDiv.innerHTML = `<div class="no-impact">Aucun impact d√©tect√© (toutes les cat√©gories sont √† "Aucun impact").</div>`;
            return;
        }

        // Calcul du score final sur 100
        const finalScore = Math.round(totalScore);

        // Construction de l'affichage des r√©sultats
        let html = `
            <div class="global-severity">
                S√©v√©rit√© Globale : <span class="severity ${globalSeverity}">${globalSeverity}</span>
            </div>
            <div class="impact-score">
                Score d'Impact : <span class="score-value">${finalScore}/100</span>
                <div class="score-bar-container">
                    <div class="score-bar" style="width: ${finalScore}%"></div>
                </div>
            </div>
            <ul class="results-list">`;
        
        results.forEach(category => {
            const categoryPercentage = Math.round((category.score / category.maxPossibleScore) * 100);
            
            html += `
                <li>
                    <div><strong>${category.emoji} ${category.name}</strong> : 
                        <span class="severity ${category.severity}">${category.severity}</span>
                        <div class="category-score">
                            <span>Score: ${Math.round(category.score)}/${category.maxPossibleScore}</span>
                            <span>${categoryPercentage}%</span>
                        </div>
                        <div class="score-bar-container">
                            <div class="score-bar" style="width: ${categoryPercentage}%"></div>
                        </div>
                    </div>
                    <div class="category-results">`;
            
            // Ajout des d√©tails par question
            category.questions.forEach(q => {
                const pointsPercentage = Math.round(q.weightedPoints / (category.maxPossibleScore / category.questions.length) * 100);
                html += `
                    <div class="question-result">
                        <span class="question-label">${q.label}</span>
                        <span>
                            <span class="severity-badge ${q.value}">${q.value}</span>
                            <span class="question-points">(${pointsPercentage}%)</span>
                        </span>
                    </div>`;
            });
            
            html += `</div></li>`;
        });
        
        html += `</ul>`;
        resultsDiv.innerHTML = html;
    }
</script>
</body>
</html>
